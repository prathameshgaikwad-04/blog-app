:root{
  /* Light-mode palette: cool blues + warm purples */
  --bg: #f3f7ff;            /* soft cool blue page background */
  --card: #ffffff;          /* card surface */
  --text: #071229;          /* very dark blue text */
  --muted: #6b7a91;         /* muted / secondary text */
  --accent: #2563eb;        /* primary cool blue (used as anchor) */
  --accent-2: #7c3aed;      /* warm purple used in gradients */
  --heat-0: #edf4ff;
  --heat-1: #dbe9ff;
  --heat-2: #a9d0ff;
  --heat-3: #7c8ffb;
  --heat-4: #5b21b6;
  --glass-alpha: 0.60;
}

[data-theme='dark']{
  /* Dark-mode palette tuned to contrast with the new accents */
  --bg: #051227;            /* deep navy */
  --card: #081225;          /* card surface (darker) */
  --text: #eaf3ff;          /* near-white with cool tint */
  --muted: #90a7c6;         /* muted text */
  --accent: #60a5fa;        /* lighter cool blue for highlights in dark mode */
  --accent-2: #9f7cff;      /* warmer purple highlight for contrast */
  --heat-0: rgba(255,255,255,0.02);
  --heat-1: rgba(96,165,250,0.12);
  --heat-2: rgba(96,165,250,0.26);
  --heat-3: rgba(124,58,237,0.36);
  --heat-4: rgba(124,58,237,0.78);
  --glass-alpha: 0.04;
}


*{box-sizing:border-box}

/* ----------------- Page background + typography ----------------- */
html,body{height:100%}
body{
  margin:0;
  font-family:Inter,system-ui,Segoe UI,Roboto,Arial,Helvetica,sans-serif;
  background:
    radial-gradient(1000px 400px at 10% 4%, rgba(124,58,237,0.03), transparent 8%),
    linear-gradient(180deg, var(--bg) 0%, var(--bg) 100%);
  color:var(--text);
  transition: background .2s ease, color .2s ease;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* ----------------- Header: glass effect ----------------- */
.app-header{
  padding:0.6rem 1rem;
  position:sticky; top:0;
  z-index:50;
  /* translucent glass — uses page depth to show effect */
  background: rgba(255,255,255,var(--glass-alpha));
  border-bottom: 1px solid rgba(6,20,38,0.06);
  backdrop-filter: blur(8px) saturate(1.06);
  -webkit-backdrop-filter: blur(8px) saturate(1.06);
  box-shadow: 0 8px 26px rgba(6,20,38,0.04);
  transition: background .2s ease, box-shadow .2s ease;
}

/* Dark theme header tweak */
:root[data-theme='dark'] .app-header{
  background: rgba(7,16,35,var(--glass-alpha));
  border-bottom: 1px solid rgba(255,255,255,0.04);
  box-shadow: 0 10px 30px rgba(2,6,23,0.6);
}

/* header inner container */
.header-inner{
  max-width:1200px;
  margin:0 auto;
  display:flex;
  align-items:center;
  gap:12px;
  padding: 6px 8px;
}

/* brand styling */
.brand{
  font-weight:700;
  font-size:20px;
  color: inherit;
}

/* ----------------- Layout containers ----------------- */
.container{
  max-width:1100px;
  margin:1.5rem auto;
  display:grid;
  grid-template-columns:1fr 320px;
  gap:1.25rem;
  padding:0 1rem;
}
@media(max-width:900px){
  .container{ grid-template-columns:1fr; padding:0 0.75rem; }
}

/* ----------------- Cards / panels ----------------- */
.main-card, .card, .post-card, .sidebar .card {
  background: var(--card);
  padding:1.25rem;
  border-radius:12px;
  /* visible border to separate in dark theme */
  border: 1px solid rgba(2,6,23,0.04);
  box-shadow: 0 12px 30px rgba(2,6,23,0.04);
  transition: transform .16s ease, box-shadow .16s ease, background .16s ease, border .16s ease;
}

/* dark cards: translucent + stronger border for readability */
:root[data-theme='dark'] .main-card,
:root[data-theme='dark'] .card,
:root[data-theme='dark'] .post-card,
:root[data-theme='dark'] .sidebar .card {
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border: 1px solid rgba(255,255,255,0.04);
  box-shadow: 0 18px 44px rgba(2,6,23,0.5);
}

/* lift on hover */
.card:hover, .main-card:hover, .post-card:hover, .sidebar .card:hover {
  transform: translateY(-6px);
  box-shadow: 0 18px 40px rgba(2,6,23,0.08);
}

/* post-card specifics */
.post-card{
  border-radius:10px;
  padding:1rem;
  margin-bottom:0.9rem;
  background: linear-gradient(180deg, rgba(0,0,0,0.02), transparent);
}

/* ----------------- Text / small helpers ----------------- */
.h1{ font-size:2rem; margin:0 0 1rem; 
  font-weight:800; 
  color:inherit; }
.title{ 
  font-weight:700; 
  color:inherit; }
.small{ 
  color:var(--muted); 
  font-size:0.92rem; }

/* dark muted color */
:root[data-theme='dark'] .small{ color: var(--muted); }

/* ----------------- Buttons and inputs ----------------- */
.btn, .primary, .format-btn {
  border-radius:10px;
  padding:0.5rem 0.75rem;
  border:1px solid rgba(0,0,0,0.06);
  background:var(--card);
  cursor:pointer;
  color:var(--text);
  text-decoration:none;
  display:inline-flex;
  align-items:center;
  gap:8px;
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease, border .12s ease;
}

/* primary style */
.primary{
  background: linear-gradient(90deg,var(--accent),var(--accent-2));
  color:#fff;
  border:none;
  box-shadow: 0 6px 18px rgba(124,58,237,0.08);
}

/* dark adjustments for primary */
:root[data-theme='dark'] .primary{
  box-shadow: 0 6px 18px rgba(139,92,246,0.12);
}

/* lift */
.btn:hover, .primary:hover { transform: translateY(-3px); box-shadow: 0 10px 24px rgba(2,6,23,0.06); }

/* inputs / textareas */
.input, textarea{
  border:1px solid rgba(0,0,0,0.06);
  padding:0.6rem;
  border-radius:8px;
  background:transparent;
  width:100%;
  color:inherit;
  transition: box-shadow .12s ease, border-color .12s ease;
}
.input:focus, textarea:focus {
  box-shadow: 0 8px 22px rgba(124,58,237,0.08);
  border-color: var(--accent);
}

/* dark input look */
:root[data-theme='dark'] .input, :root[data-theme='dark'] textarea {
  background: rgba(255,255,255,0.02);
  border: 1px solid rgba(255,255,255,0.06);
  color: var(--text);
}

/* links */
a{ transition: color .12s ease; color: var(--accent); text-decoration: underline; }
a:hover{ color: var(--accent-2); }

/* subtle divider */
.app-divider{ border-top:1px solid rgba(6,20,38,0.04); }

/* ----------------- Theme toggle button ----------------- */
.theme-toggle-btn{
  width:44px; height:44px;
  border-radius:10px;
  border:1px solid rgba(0,0,0,0.06);
  display:flex; align-items:center; justify-content:center;
  padding:6px; background:var(--card); cursor:pointer;
  transition: box-shadow .12s ease, transform .12s ease;
}
.theme-toggle-btn:hover{ transform: translateY(-2px); box-shadow: 0 8px 20px rgba(2,6,23,0.06); }

/* ----------------- Avatar (text-only) ----------------- */
.avatar {
  width: 38px; 
  height: 38px; 
  border-radius: 50%;
  display:flex !important; 
  align-items:center !important; 
  justify-content:center !important;
  font-weight:700; 
  font-size:16px; 
  line-height:1; 
  padding:0;
  color:#fff;
  background: linear-gradient(135deg, var(--accent-2), var(--accent));
  border: 2px solid rgba(0,0,0,0.18);
  cursor:pointer; 
  user-select:none; 
  box-sizing:border-box; 
  vertical-align:middle;
  transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
}
.avatar:hover{ 
  transform: translateY(-3px); 
  box-shadow: 0 8px 20px rgba(0,0,0,0.18); 
  border-color: rgba(0,0,0,0.45); }
.avatar-button:focus{ 
  outline:none; 
  box-shadow: 0 0 0 6px rgba(124,58,237,0.10); 
  transform: translateY(-2px); }

/* avatar large */
.avatar-lg { 
  width:84px; 
  height:84px; 
  border-radius:50%; 
  display:flex; 
  align-items:center; 
  justify-content:center;
  font-size:32px; 
  font-weight:800; 
  padding:0; 
  color:white;
  background: linear-gradient(135deg, var(--accent-2), var(--accent));
  border: 3px solid rgba(0,0,0,0.12);
}
:root[data-theme='dark'] .avatar, :root[data-theme='dark'] .avatar-lg {
  background: linear-gradient(135deg, #1f2a37, #334155);
  border-color: rgba(255,255,255,0.18);
}

/* ----------------- Profile dropdown visuals ----------------- */
.profile-dropdown{ 
  position:absolute; 
  top:52px; right:0; 
  z-index:200; }
.profile-dropdown .card{ 
  padding:0.75rem; 
  border-radius:10px; 
  box-shadow:0 12px 30px rgba(2,6,23,0.08); }

/* dropdown animation */
.profile-dropdown-wrapper{ 
  animation: dropdown-pop .18s ease forwards; 
  transform-origin: top right; opacity: 0; }
@keyframes dropdown-pop { from { transform: scale(.92) translateY(-6px); opacity:0 } to { transform: scale(1) translateY(0); opacity:1 } }
.profile-dropdown-wrapper.hide{ animation: dropdown-hide .15s ease forwards; }
@keyframes dropdown-hide { from { transform: scale(1) translateY(0); opacity:1 } to { transform: scale(0.95) translateY(-4px); opacity:0 } }

/* ----------------- Heatmap (kept responsive + theme-aware) ----------------- */
.heatmap-root { 
  width:100%; 
  overflow-x:auto; 
  -webkit-overflow-scrolling: touch; 
  padding-bottom:8px; }
.heatmap-grid { 
  display:flex; 
  gap:6px; 
  padding:12px; 
  align-items:flex-start; 
  min-width:100%; 
  box-sizing:border-box; }
.heatmap-week { 
  display:flex; 
  flex-direction:column; 
  gap:6px; 
  flex:0 0 auto; }
.heatmap-cell { 
  width:14px; 
  height:14px; 
  border-radius:4px; 
  border:1px solid rgba(0,0,0,0.06); 
  transition: transform .12s, box-shadow .12s, background-color .12s; background: var(--heat-0); box-sizing:border-box; }
.heatmap-cell:hover { transform: translateY(-4px); 
  box-shadow: 0 10px 24px rgba(2,6,23,0.06); }
.heatmap-cell.level-0 { background: var(--heat-0); }
.heatmap-cell.level-1 { background: var(--heat-1); }
.heatmap-cell.level-2 { background: var(--heat-2); }
.heatmap-cell.level-3 { background: var(--heat-3); color:#fff; }
.heatmap-cell.level-4 { background: var(--heat-4); color:#fff; }
.heatmap-root::-webkit-scrollbar { height:10px; }
.heatmap-root::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.16); border-radius:10px; border:2px solid transparent; background-clip:padding-box; }
@media(max-width:900px){ .heatmap-grid{ gap:4px; padding:10px } .heatmap-week{ gap:4px } .heatmap-cell{ width:12px; height:12px; border-radius:3px } }

/* ----------------- Toasts ----------------- */
.toast-container { 
  position: fixed; top:20px; 
  right:20px; z-index:5000; 
  display:flex; flex-direction:column; 
  gap:10px; }
.toast { 
  padding:12px 18px; 
  border-radius:8px; font-weight:600; 
  color:white; box-shadow:0 4px 14px rgba(0,0,0,0.18); 
  opacity:0; transform:translateY(-10px); 
  transition: opacity .3s ease, transform .3s ease; }
.toast-in{ opacity:1; transform:translateY(0); } .toast-out{ opacity:0; transform:translateY(-10px); }
.toast-success{ background: linear-gradient(135deg, #22c55e, #16a34a); } .toast-error{ background: linear-gradient(135deg, #ef4444, #b91c1c); }
:root[data-theme="dark"] .toast-success{ background: linear-gradient(135deg, #4ade80, #22c55e); } :root[data-theme="dark"] .toast-error{ background: linear-gradient(135deg, #f87171, #ef4444); }

/* ----------------- Misc helpers ----------------- */
.media-preview img, .media-preview video{ max-width:120px; border-radius:8px; border:1px solid rgba(0,0,0,0.06); }
.profile-card{ min-width:260px; padding:0.9rem; border-radius:10px; box-shadow:0 18px 40px rgba(2,6,23,0.08); }
.streak-day{ width:14px; height:14px; border-radius:4px; background: rgba(0,0,0,0.06); transition: transform .12s, background .12s; }
[data-theme='dark'] .streak-day{ background: rgba(255,255,255,0.06); }
.streak-day.active{ background: linear-gradient(90deg,var(--accent),var(--accent-2)); transform: translateY(-3px); box-shadow: 0 8px 18px rgba(124,58,237,0.08); }

/* small spacing tweaks */
.header-inner { align-items:center; }
.sidebar .card { margin-bottom:1rem; }

/* -------- Theme toggle icons & tooltip -------- */

.theme-toggle-btn {
  width:44px; height:44px;
  border-radius:10px;
  border:1px solid rgba(0,0,0,0.06);
  display:flex; align-items:center; justify-content:center;
  padding:6px; background:var(--card); cursor:pointer;
  transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease, background .12s ease;
  position: relative;
}

/* stronger border in dark so the control is visible */
:root[data-theme='dark'] .theme-toggle-btn {
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.02);
  box-shadow: 0 4px 12px rgba(2,6,23,0.35);
}

/* slight lift */
.theme-toggle-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 24px rgba(2,6,23,0.06); }

/* icon wrapper styling — keep icon centered and animate */
.tt-icon { display:inline-flex; align-items:center; justify-content:center; color:var(--text); transition: transform .18s ease, color .18s ease; }
.tt-icon.sun { transform: rotate(0deg); }
.tt-icon.moon { transform: rotate(10deg) scale(1.05); color: var(--muted); }

/* color the svg stroke/fill in dark mode for contrast */
:root[data-theme='dark'] .tt-icon { color: var(--text); }

/* Tooltip: hidden by default, fades/ slides up on hover */
.theme-tooltip {
  position: absolute;
  top: -10px;
  left: 50%;
  transform: translate(-50%, -8px);
  pointer-events: none;
  opacity: 0;
  transition: opacity .18s ease, transform .18s ease;
  z-index: 400;
  min-width: 72px;
  display:flex;
  justify-content:center;
}
.theme-tooltip.visible {
  opacity: 1;
  transform: translate(-50%, -14px);
  pointer-events: auto;
}
.theme-tooltip-inner {
  background: rgba(0,0,0,0.75);
  color: #fff;
  padding:6px 10px;
  border-radius:8px;
  font-size: 12px;
  font-weight:600;
  box-shadow: 0 6px 18px rgba(2,6,23,0.35);
}

/* Light-mode tooltip variant */
:root:not([data-theme='dark']) .theme-tooltip-inner {
  background: rgba(0,0,0,0.75);
  color:#fff;
}

/* Dark-mode tooltip variant — slightly lighter so it reads on dark header */
:root[data-theme='dark'] .theme-tooltip-inner {
  background: rgba(255,255,255,0.08);
  color: var(--text);
  border: 1px solid rgba(255,255,255,0.06);
}

/* add small caret */
.theme-tooltip-inner::after {
  content: "";
  position: absolute;
  bottom: -6px;
  left: 50%;
  transform: translateX(-50%);
  border: 6px solid transparent;
  border-top-color: rgba(0,0,0,0.75);
}
:root[data-theme='dark'] .theme-tooltip-inner::after {
  border-top-color: rgba(255,255,255,0.06);
}

/* ensure high-contrast focus ring for keyboard users */
.theme-toggle-btn:focus {
  outline: none;
  box-shadow: 0 0 0 6px rgba(37,99,235,0.12);
}

/* -------- Alternate dark palette variant (enable with data-theme-variant="alt") --------
   This variant increases header glass contrast and slightly brightens card borders
   so the glass effect stands out more on deep navy backgrounds.
*/
:root[data-theme='dark'][data-theme-variant='alt'] {
  --bg: #041226;       /* slightly different deep navy */
  --card: #071428;     /* slightly lighter card for better separation */
  --text: #eaf6ff;
  --muted: #9ab4db;
  --accent: #60a5fa;
  --accent-2: #8b5cf6;
  --glass-alpha: 0.10; /* make glass a little stronger */
  --heat-0: rgba(255,255,255,0.02);
  --heat-1: rgba(96,165,250,0.12);
  --heat-2: rgba(96,165,250,0.26);
  --heat-3: rgba(124,58,237,0.36);
  --heat-4: rgba(124,58,237,0.78);
}

/* small tweak to header when alt variant active (sharper border + faint highlight) */
:root[data-theme='dark'][data-theme-variant='alt'] .app-header {
  border-bottom: 1px solid rgba(255,255,255,0.06);
  box-shadow: 0 16px 40px rgba(2,6,23,0.6);
}

/* ========================= Dropdown readability fix =========================
   Stronger semi-solid glass for dropdown and opaque inner elements so content
   is always readable over any page background.
   Place this at the end of styles.css (highest priority).
   ============================================================================*/

/* container + card (higher specificity + !important to override other rules) */
.profile-dropdown,
.profile-dropdown-wrapper,
.profile-dropdown .card,
.profile-card.card {
  position: absolute !important;
  top: 56px !important;
  right: 0 !important;
  z-index: 9999 !important;

  /* stronger semi-solid background (light mode) */
  background: rgba(255,255,255,0.96) !important;
  /* maintain a little glass blur so it still reads as 'frosted' */
  backdrop-filter: blur(8px) saturate(1.08) !important;
  -webkit-backdrop-filter: blur(8px) saturate(1.08) !important;

  border-radius: 12px !important;
  border: 1px solid rgba(6,20,38,0.06) !important;
  box-shadow: 0 20px 50px rgba(6,20,38,0.12) !important;

  padding: 16px !important;
  min-width: 260px !important;
  pointer-events: auto !important;
  overflow: visible !important;
  color: var(--text) !important;
}

/* Ensure inner wrapper (if present) also normalized */
.profile-dropdown > * { background: transparent !important; }

/* Make sure the title and small text are fully opaque */
.profile-dropdown .title,
.profile-dropdown .h2,
.profile-dropdown .profile-name,
.profile-dropdown .small,
.profile-card .title,
.profile-card .small {
  color: var(--text) !important;
  opacity: 1 !important;
}

/* Buttons inside dropdown should be fully opaque and readable */
.profile-dropdown .btn,
.profile-dropdown .primary,
.profile-card .btn,
.profile-card .primary {
  background: var(--card) !important;
  color: var(--text) !important;
  border: 1px solid rgba(6,20,38,0.06) !important;
  box-shadow: 0 8px 20px rgba(6,20,38,0.06) !important;
  opacity: 1 !important;
}

/* Link appearance */
.profile-dropdown a, .profile-dropdown a:visited {
  color: var(--accent) !important;
  text-decoration: none !important;
}
.profile-dropdown a:hover { text-decoration: underline !important; }

/* Slightly separate the inner card area from outer container if nested */
.profile-dropdown .inner, .profile-dropdown .content {
  background: transparent !important;
}

/* Dark mode: stronger tinted panel (semi solid) for legibility */
:root[data-theme='dark'] .profile-dropdown,
:root[data-theme='dark'] .profile-dropdown-wrapper,
:root[data-theme='dark'] .profile-dropdown .card,
:root[data-theme='dark'] .profile-card.card {
  background: rgba(8,12,22,0.88) !important;   /* stronger tint */
  backdrop-filter: blur(10px) saturate(1.08) !important;
  -webkit-backdrop-filter: blur(10px) saturate(1.08) !important;
  border: 1px solid rgba(255,255,255,0.06) !important;
  box-shadow: 0 26px 60px rgba(2,6,23,0.6) !important;
  color: var(--text) !important;
}

/* Ensure streak-days / small squares stay visible (force opaque border) */
.profile-dropdown .streak-day,
.profile-card .streak-day {
  border: 1px solid rgba(0,0,0,0.06) !important;
}

/* Accessibility: focus ring for keyboard users */
.profile-dropdown .btn:focus,
.profile-dropdown .primary:focus,
.profile-dropdown .avatar-button:focus {
  outline: none !important;
  box-shadow: 0 0 0 6px rgba(124,58,237,0.08) !important;
}

/* ---------- Profile dropdown action buttons: equal sizing & style ---------- */

.profile-actions {
  display: flex;
  gap: 10px;
  margin-top: 12px;
}

/* Use same visual style for both link and button */
.profile-actions .action-btn,
.profile-actions a.action-btn,
.profile-actions button.action-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 10px 14px;
  min-width: 100px;      /* force a comfortable width */
  flex: 1 1 0;           /* allow buttons to share the available width equally */
  border-radius: 10px;
  background: var(--card);
  color: var(--text);
  border: 1px solid rgba(6,20,38,0.06);
  text-decoration: none;
  cursor: pointer;
  box-shadow: 0 8px 18px rgba(2,6,23,0.04);
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
}

/* make them visually identical on hover/focus */
.profile-actions .action-btn:hover,
.profile-actions .action-btn:focus {
  transform: translateY(-3px);
  box-shadow: 0 12px 28px rgba(2,6,23,0.06);
  outline: none;
}

/* dark theme adjustments */
:root[data-theme='dark'] .profile-actions .action-btn {
  background: rgba(255,255,255,0.02);
  border: 1px solid rgba(255,255,255,0.06);
  color: var(--text);
}

/* ===== Quick fix: hide stray/empty card inside profile dropdown ===== */
/* Hides any .card inside .profile-dropdown that contains no visible content */
.profile-dropdown .card:empty,
.profile-dropdown .card:empty * {
  display: none !important;
  visibility: hidden !important;
}

/* Also hide tiny cards under 28px height (likely stray) */
.profile-dropdown .card {
  min-height: 0 !important;
}
.profile-dropdown .card[style] {
  /* precaution: if a tiny explicit height exists, hide it */
  height: auto !important;
}
.profile-dropdown .card[role="presentation"]:empty { display:none !important; }

.profile-dropdown-wrapper {
  background: transparent !important;
  padding: 0 !important;
  margin: 0 !important;
  border: none !important;
}

